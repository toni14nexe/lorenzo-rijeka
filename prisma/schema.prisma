generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id                String    @id @default(cuid())
  email             String    @unique
  firstname         String?
  lastname          String?
  mobile            String?
  country           String?
  place             String?
  address           String?
  createdAt         DateTime  @default(now())
  password          String
  role              String?   @default("user")
  updatedAt         DateTime?
  deletedAt         DateTime?
  forgetPassHash    String?
  verified          Boolean?  @default(false)
  verificationToken String?
  firstLogin        DateTime?
  lastLogin         DateTime?
}

model ProductCategory {
  id        String            @id @default(cuid())
  name      String            @unique
  parentId  String?
  image     String?
  parent    ProductCategory?  @relation("CategoryHierarchy", fields: [parentId], references: [id])
  children  ProductCategory[] @relation("CategoryHierarchy")
  createdAt DateTime          @default(now())
  updatedAt DateTime?
  deletedAt DateTime?
  products  Product[]         @relation("CategoryProduct")
}

model Product {
  id                String          @id @default(cuid())
  name              String
  description       String
  price             Decimal         @db.Decimal(10, 2)
  sold              Int             @default(0)
  images            String[]
  videos            String[]
  createdAt         DateTime        @default(now())
  updatedAt         DateTime?
  deletedAt         DateTime?
  productCategoryId String
  productCategory   ProductCategory @relation("CategoryProduct", fields: [productCategoryId], references: [id])
}

model Order {
  id            String    @id @default(cuid())
  list          Json
  totalPrice    Decimal   @db.Decimal(10, 2)
  buyerFullname String
  buyerAddress  String
  buyerPlace    String
  buyerZipCode  String
  buyerCountry  String
  buyerEmail    String
  buyerNumber   String?
  description   String?
  payment       String
  shipping      String
  createdAt     DateTime  @default(now())
  deletedAt     DateTime?
}
