generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id                    String                 @id @default(cuid())
  email                 String                 @unique
  firstname             String?
  lastname              String?
  mobile                String?
  country               String?
  place                 String?
  address               String?
  createdAt             DateTime               @default(now())
  password              String
  role                  String?                @default("user")
  updatedAt             DateTime?
  deletedAt             DateTime?
  forgetPassHash        String?
  verified              Boolean?               @default(false)
  verificationToken     String?
  firstLogin            DateTime?
  lastLogin             DateTime?
}

model PortalCategory {
  id         String             @id @default(cuid())
  name       String             @unique
  parentId   String?
  parent     PortalCategory?    @relation("CategoryHierarchy", fields: [parentId], references: [id])
  children   PortalCategory[]   @relation("CategoryHierarchy")
  createdAt  DateTime           @default(now())
  updatedAt       DateTime?
  deletedAt  DateTime?
  news       News[]             @relation("CategoryNews")
}

model News {
  id              String          @id @default(cuid())
  categoryId      String
  title           String
  author          String
  text            String
  images          String[]
  videos          String[]
  createdAt       DateTime        @default(now())
  updatedAt       DateTime?
  deletedAt       DateTime?
  category        PortalCategory  @relation("CategoryNews", fields: [categoryId], references: [id])
}

model JobsCategory {
  id          String            @id @default(cuid())
  name        String            @unique
  createdAt   DateTime          @default(now())
  updatedAt   DateTime?
  deletedAt   DateTime?
  jobs        Job[]             @relation("JobsCategoryJob")
}

model Job {
  id            String            @id @default(cuid())
  name          String
  description   String
  salary        Decimal           @db.Decimal(10, 2)
  contactEmail  String            @default("")
  contactNumber String?
  createdAt     DateTime          @default(now())
  updatedAt     DateTime?
  deletedAt     DateTime?
  jobCategoryId String
  jobCategory   JobsCategory      @relation("JobsCategoryJob", fields: [jobCategoryId], references: [id])
}

model ProductCategory {
  id          String            @id @default(cuid())
  name        String            @unique
  createdAt   DateTime          @default(now())
  updatedAt   DateTime?
  deletedAt   DateTime?
  products    Product[]         @relation("ProductCategoryProduct")
}

model Product {
  id                  String            @id @default(cuid())
  name                String
  description         String
  price               Decimal           @db.Decimal(10, 2)
  images              String[]
  videos              String[]
  createdAt           DateTime          @default(now())
  updatedAt           DateTime?
  deletedAt           DateTime?
  productCategoryId   String
  productCategory     ProductCategory   @relation("ProductCategoryProduct", fields: [productCategoryId], references: [id])
}
